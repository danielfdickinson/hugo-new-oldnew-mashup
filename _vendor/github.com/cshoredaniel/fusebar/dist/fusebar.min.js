!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fusebar",[],t):"object"==typeof exports?exports.fusebar=t():e.fusebar=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n={distance:1e3,findAllMatches:!0,shouldSort:!0,includeMatches:!0,minMatchCharLength:1,threshold:.5,tokenize:!1,keys:[{name:"title",weight:.3},{name:"content",weight:.4},{name:"tags",weight:.1},{name:"categories",weight:.1}]};function r(e,t){var n=new XMLHttpRequest;n.open("GET",indexurl,!0),n.onload=function(){if(n.status>=200&&n.status<400){var r=n.responseText.replace(/$/," "),i=JSON.parse(r),a=new Fuse(i,t).search(e);if(a.length>0)o(a,e);else{var l=document.createElement("p");l.innerHTML="No matches found",document.getElementById("search-results").appendChild(l)}}else console.log("fusebar had error "+n.status+" on "+indexurl)},n.onerror=function(){console.log("fusebar search connection error "+n.status)},n.send()}function i(e){var t=document.createElement("mark"),n=document.createElement("span");return n.setAttribute("class","mark"),n.innerHTML=e,t.appendChild(n),t}function a(e){var t={};return e.forEach((function(e,n){var r=document.createElement("div"),a=0;e.indices.forEach((function(t,n){"content"==e.key&&e.value.length>1e3&&(e.value=e.value.substring(0,1e3));var o=e.value.substring(t[0],t[1]+1);if(t[0]>=a){var l=document.createElement("span");l.innerHTML=e.value.substring(a,t[0]),r.appendChild(l)}r.appendChild(i(o)),a=t[1]+1})),a<e.value.length&&r.appendChild(document.createTextNode(e.value.substring(a,e.value.length))),t[e.key]={element:r,original_value:e.value}})),t}function o(e,t){return e.forEach((function(e,t){var n=document.createElement("div");n.setAttribute("class","search-result"),n.id="search-result-"+t.toString(),e.item.content&&e.item.content.length>1e3&&(e.item.content=e.item.content.substring(0,1e3));var r=a(e.matches);["Title","Content","Tags","Categories"].forEach((function(t){var i,a,o=t.toString().toLowerCase();if("title"==o&&((i=document.createElement("h4")).setAttribute("class","search-result-title"),(a=document.createElement("a")).setAttribute("href",e.item.permalink)),void 0!==r[o])if("title"==o)a.innerHTML=r[o].element.innerHTML,r[o].element.innerHTML&&""!=r[o].element.innerHTML||(a.innnerHTML="Untitled");else if("content"==o)(i=r.content.element).setAttribute("class","search-result-content");else{var l;(i=document.createElement("div")).setAttribute("class","search-result-"+o),i.appendChild(document.createTextNode(t+":  "));var c=!0;e.item[o].forEach((function(e,t){c?c=!1:i.appendChild(document.createTextNode(", ")),e==r[o].original_value?(l=document.createElement("span")).innerHTML=r[o].element.innerHTML:(l=document.createElement("span")).innerHTML=e,i.appendChild(l)}))}else"title"==o?(a.innerHTML=e.item.title,e.item.title&&""!=e.item.title||(a.innerHTML="Untitled")):"content"==o?e.item.content&&""!=e.item.content&&((i=document.createElement("div")).innerHTML=e.item.content):e.item[o]&&((i=document.createElement("div")).setAttribute("class","search-result-"+o),i.appendChild(document.createTextNode(t+":  ")),c=!0,e.item[o].forEach((function(e,t){c?c=!1:i.appendChild(document.createTextNode(", "));var n=document.createElement("span");n.innerHTML=e,i.appendChild(n)})));"title"==o&&i.appendChild(a),void 0!==i&&n.appendChild(i)})),document.getElementById("search-results").appendChild(n)})),!0}e.exports={doCloseSearch:function(){document.getElementById("search-results")&&(document.getElementById("search-results").style="display: none; visibility: hidden;",document.getElementById("search-results").innerHTML="<h2>Search Results</h2>")},doSearch:function(){var e=document.search_form.s.value;if(e){if(document.getElementById("search-query")){document.getElementById("search-results").innerHTML="<h2>Search Results</h2>",document.getElementById("search-results").style="display: block; visibility: visible;";var t=n;t.minMatchCharLength=.8*e.length,r(e,t)}}else{var i=document.createElement("p");i.innerText="Please enter a word or phrase above",document.getElementById("search-results")&&(document.getElementById("search-results").appendChild(i),document.getElementById("search-results").style="display: block; visibility: visible;")}return!1},executeSearch:r,createMark:i,markMatches:a,populateResults:o}}])}));