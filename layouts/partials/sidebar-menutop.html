<!-- Copyright 2018 Daniel F. Dickinson,
       Released under the Creative Commons 4.0 BY (Attribution) License -->
{{ if .Data.Pages }}
  {{ if not .Sections }}
    {{ .Scratch.Set "sbHasSubmenu" true }}
    {{ partial "sidebar-menuitem" . }}
  {{ end }}
  {{ if lt (.Scratch.Get "sbPrevLevel") (.Scratch.Get "sbMaxLevel") }}
    {{ if .Sections }}
      {{ .Scratch.Set "sbSections" .Sections }}
      {{ .Scratch.Set "sbHasSubmenu" true }}
      {{ partial "sidebar-menusub" . }}
    {{ end }}
    {{ partial "sidebar-menusibs" . }}
    </ul></li>
  {{ end }}
{{ else }}
  {{ .Scratch.Set "sbHasSubmenu" false }}
  {{ partial "sidebar-menuitem" . }}
{{ end }}
