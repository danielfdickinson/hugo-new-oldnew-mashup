{{ if (and (and (ne (.Param "noptoc") true) .TableOfContents ) (not (eq (path.Base .File.Dir) "licenses" ) ) ) }}
    {{ if ne  (trim .TableOfContents "\n") "<nav id=\"TableOfContents\"></nav>" }}
  <section aria-labelledby="article-toc-title" class="article-toc toc-box">
    <input type="checkbox" class="ctoc-trigger" id="ctoc-trigger-checkbox"><div class="ctoc-start"><svg preserveAspectRatio="xMidYMid meet" viewBox="-5 -5 34 34">
          <g>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="white"></path>
          </g>
        </svg></div><h2 id="article-toc-title">Contents</h2>
        {{ replaceRE "(?msU:<nav id=\"TableOfContents\">.*<ul>)" "<nav id=\"TableOfContents\" class=\"ctoc\" onclick=\"document.getElementById('ctoc-trigger-checkbox').checked=false;\"><ul class=\"ctoc-list\" role=\"menu\">" (replace .TableOfContents `href="#` (printf `href="%s#` .RelPermalink)) | safeHTML }}
    <div class="ctoc-overlay"></div>
  </section>
  {{ end }}
{{ end }}
