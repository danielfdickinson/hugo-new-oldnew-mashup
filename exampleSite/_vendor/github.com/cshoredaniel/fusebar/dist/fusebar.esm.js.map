{"version":3,"file":"fusebar.esm.js","sources":["../src/index.js"],"sourcesContent":["/* global indexurl Fuse */\n\nvar summaryInclude = 1000\nvar fuseOptions = { // See Fuse.js for details\n  distance: 1000,\n  findAllMatches: true,\n  shouldSort: true,\n  includeMatches: true,\n  minMatchCharLength: 1,\n  threshold: 0.5,  // default of 0.6 matches too much\n  tokenize: false,\n  keys: [{\n    name: 'title',\n    weight: 0.3\n  },\n  {\n    name: 'content',\n    weight: 0.4\n  },\n  {\n    name: 'tags',\n    weight: 0.1\n  },\n  {\n    name: 'categories',\n    weight: 0.1\n  }\n  ]\n}\n\nfunction doCloseSearch() { // eslint-disable-line no-unused-vars\n  if (document.getElementById('search-results')) {\n    document.getElementById('search-results').style = 'display: none; visibility: hidden;'\n    document.getElementById('search-results').innerHTML = '<h2>Search Results</h2>'\n  }\n}\n\nfunction doSearch() { // eslint-disable-line no-unused-vars\n  var searchQuery = document.search_form.s.value\n  if (searchQuery) {\n    if (document.getElementById('search-query')) {\n      document.getElementById('search-results').innerHTML = '<h2>Search Results</h2>'\n\n      document.getElementById('search-results').style = 'display: block; visibility: visible;'\n      var searchFuseOptions = fuseOptions\n      searchFuseOptions.minMatchCharLength = searchQuery.length * 0.8\n      executeSearch(searchQuery, searchFuseOptions)\n    }\n  } else {\n    var para = document.createElement('p')\n    para.innerText = 'Please enter a word or phrase above'\n    if (document.getElementById('search-results')) {\n      document.getElementById('search-results').appendChild(para)\n      document.getElementById('search-results').style = 'display: block; visibility: visible;'\n    }\n  }\n  return false\n}\n\nfunction executeSearch(searchQuery, searchFuseOptions) {\n  var request = new XMLHttpRequest()\n  request.open('GET', indexurl, true)\n  request.onload = function () {\n    if (request.status >= 200 && request.status < 400) {\n      var jsonprep = request.responseText.replace(/$/, ' ')\n      var pages = JSON.parse(jsonprep)\n      var fuse = new Fuse(pages, searchFuseOptions)\n      var result = fuse.search(searchQuery)\n      if (result.length > 0) {\n        populateResults(result, searchQuery)\n      } else {\n        var para = document.createElement('p')\n        para.innerHTML = 'No matches found'\n        document.getElementById('search-results').appendChild(para)\n      }\n    } else {\n      console.log('fusebar had error ' + request.status + ' on ' + indexurl)\n    }\n  }\n  request.onerror = function () {\n    console.log('fusebar search connection error ' + request.status)\n  }\n  request.send()\n}\n\nfunction createMark(value) {\n  var markel = document.createElement('mark')\n  var spanel = document.createElement('span')\n  spanel.setAttribute('class', 'mark')\n  spanel.innerHTML = value\n  markel.appendChild(spanel)\n\n  return markel\n}\n\nfunction markMatches(matches) {\n  var newResult = {}\n  matches.forEach(function (items, num) { // eslint-disable-line no-unused-vars\n    var newElement = document.createElement('div')\n\n    var prevIndexEnd = 0\n\n    items.indices.forEach(function (indexpair, indexnum) { // eslint-disable-line no-unused-vars\n      if (items.key == 'content' && items.value.length > summaryInclude) {\n        items.value = items.value.substring(0, summaryInclude)\n      }\n\n      var matchString = items.value.substring(indexpair[0], indexpair[1] + 1)\n      if (indexpair[0] >= prevIndexEnd) {\n        var newSubString = document.createElement('span')\n        newSubString.innerHTML = items.value.substring(prevIndexEnd, indexpair[0])\n        newElement.appendChild(newSubString)\n      }\n\n      newElement.appendChild(createMark(matchString))\n\n      prevIndexEnd = indexpair[1] + 1\n    })\n\n    if ((prevIndexEnd) < items.value.length) {\n      newElement.appendChild(\n        document.createTextNode(\n          items.value.substring(prevIndexEnd, items.value.length)\n        )\n      )\n    }\n\n    newResult[items.key] = {\n      'element': newElement,\n      'original_value': items.value\n    }\n  })\n\n  return newResult\n}\n\nfunction populateResults(results, searchQuery) { // eslint-disable-line no-unused-vars\n  results.forEach(function (result, resnum) { // eslint-disable-line no-unused-vars\n    var resultElement = document.createElement('div')\n    resultElement.setAttribute('class', 'search-result')\n    resultElement.id = 'search-result-' + resnum.toString()\n    if (result.item.content && result.item.content.length > summaryInclude) {\n      result.item.content = result.item.content.substring(0, summaryInclude)\n    }\n    var resultMap = markMatches(result.matches)\n    var resultKeys = ['Title', 'Content', 'Tags', 'Categories']\n    resultKeys.forEach(function (key) {\n\n      var lowerKey = key.toString().toLowerCase()\n      var keyElement\n      var resultTitleLink\n\n      if (lowerKey == 'title') {\n        keyElement = document.createElement('h4')\n        keyElement.setAttribute('class', 'search-result-title')\n        resultTitleLink = document.createElement('a')\n        resultTitleLink.setAttribute('href', result.item.permalink)\n      }\n\n      if (typeof resultMap[lowerKey] !== 'undefined') {\n        if (lowerKey == 'title') {\n          resultTitleLink.innerHTML = resultMap[lowerKey].element.innerHTML\n          if (!resultMap[lowerKey].element.innerHTML || resultMap[lowerKey].element.innerHTML == '') {\n            resultTitleLink.innnerHTML = 'Untitled'\n          }\n        } else if (lowerKey == 'content') {\n          keyElement = resultMap.content.element\n          keyElement.setAttribute('class', 'search-result-content')\n        } else {\n          var keyElVal\n          keyElement = document.createElement('div')\n          keyElement.setAttribute('class', 'search-result-' + lowerKey)\n          keyElement.appendChild(document.createTextNode(key + ':  '))\n          var firstVal = true\n          result.item[lowerKey].forEach(function (tcval, tckey) { // eslint-disable-line no-unused-vars\n            if (!firstVal) {\n              keyElement.appendChild(document.createTextNode(', '))\n            } else {\n              firstVal = false\n            }\n            if (tcval == resultMap[lowerKey].original_value) {\n              keyElVal = document.createElement('span')\n              keyElVal.innerHTML = resultMap[lowerKey].element.innerHTML\n\n            } else {\n              keyElVal = document.createElement('span')\n              keyElVal.innerHTML = tcval\n            }\n\n            keyElement.appendChild(keyElVal)\n          })\n        }\n      } else {\n        if (lowerKey == 'title') {\n          resultTitleLink.innerHTML = result.item.title\n          if (!result.item.title || result.item.title == '') {\n            resultTitleLink.innerHTML = 'Untitled'\n          }\n        } else if (lowerKey == 'content') {\n          if (result.item.content && (result.item.content != '')) {\n            keyElement = document.createElement('div')\n            keyElement.innerHTML = result.item.content\n          }\n        } else if (result.item[lowerKey]) {\n          keyElement = document.createElement('div')\n          keyElement.setAttribute('class', 'search-result-' + lowerKey)\n          keyElement.appendChild(document.createTextNode(key + ':  '))\n          firstVal = true\n          result.item[lowerKey].forEach(function (tcval, tckey) { // eslint-disable-line no-unused-vars\n            if (!firstVal) {\n              keyElement.appendChild(document.createTextNode(', '))\n            } else {\n              firstVal = false\n            }\n            var keyElVal = document.createElement('span')\n            keyElVal.innerHTML = tcval\n            keyElement.appendChild(keyElVal)\n          })\n        }\n      }\n\n      if (lowerKey == 'title') {\n        keyElement.appendChild(resultTitleLink)\n      }\n\n      if (typeof keyElement !== 'undefined') {\n        resultElement.appendChild(keyElement)\n      }\n    })\n\n    document.getElementById('search-results').appendChild(resultElement)\n  })\n\n  return true\n}\n\nexport {\n  doCloseSearch,\n  doSearch,\n  executeSearch,\n  createMark,\n  markMatches,\n  populateResults\n}\n"],"names":["summaryInclude","fuseOptions","distance","findAllMatches","shouldSort","includeMatches","minMatchCharLength","threshold","tokenize","keys","name","weight","doCloseSearch","document","getElementById","style","innerHTML","doSearch","searchQuery","search_form","s","value","searchFuseOptions","length","executeSearch","para","createElement","innerText","appendChild","request","XMLHttpRequest","open","indexurl","onload","status","jsonprep","responseText","replace","pages","JSON","parse","fuse","Fuse","result","search","populateResults","console","log","onerror","send","createMark","markel","spanel","setAttribute","markMatches","matches","newResult","forEach","items","num","newElement","prevIndexEnd","indices","indexpair","indexnum","key","substring","matchString","newSubString","createTextNode","results","resnum","resultElement","id","toString","item","content","resultMap","resultKeys","lowerKey","toLowerCase","keyElement","resultTitleLink","permalink","element","innnerHTML","keyElVal","firstVal","tcval","tckey","original_value","title"],"mappings":"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"}