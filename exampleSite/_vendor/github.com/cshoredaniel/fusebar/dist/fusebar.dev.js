/**
 * fusebar.js v0.2.2 - Private website search for browsers using Fuse.js as backend (https://www.thecshore.com/projects/fusebar)
 *
 * Copyright (c) 2020 Daniel F. Dickinson (https://www.thecshore.com)
 * All Rights Reserved. Apache Software License 2.0
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
  typeof define === 'function' && define.amd ? define(['exports'], factory) :
  (global = global || self, factory(global.fusebar = {}));
}(this, (function (exports) { 'use strict';

  /* global indexurl Fuse */
  var summaryInclude = 1000;
  var fuseOptions = {
    // See Fuse.js for details
    distance: 1000,
    findAllMatches: true,
    shouldSort: true,
    includeMatches: true,
    minMatchCharLength: 1,
    threshold: 0.5,
    // default of 0.6 matches too much
    tokenize: false,
    keys: [{
      name: 'title',
      weight: 0.3
    }, {
      name: 'content',
      weight: 0.4
    }, {
      name: 'tags',
      weight: 0.1
    }, {
      name: 'categories',
      weight: 0.1
    }]
  };

  function doCloseSearch() {
    // eslint-disable-line no-unused-vars
    if (document.getElementById('search-results')) {
      document.getElementById('search-results').style = 'display: none; visibility: hidden;';
      document.getElementById('search-results').innerHTML = '<h2>Search Results</h2>';
    }
  }

  function doSearch() {
    // eslint-disable-line no-unused-vars
    var searchQuery = document.search_form.s.value;

    if (searchQuery) {
      if (document.getElementById('search-query')) {
        document.getElementById('search-results').innerHTML = '<h2>Search Results</h2>';
        document.getElementById('search-results').style = 'display: block; visibility: visible;';
        var searchFuseOptions = fuseOptions;
        searchFuseOptions.minMatchCharLength = searchQuery.length * 0.8;
        executeSearch(searchQuery, searchFuseOptions);
      }
    } else {
      var para = document.createElement('p');
      para.innerText = 'Please enter a word or phrase above';

      if (document.getElementById('search-results')) {
        document.getElementById('search-results').appendChild(para);
        document.getElementById('search-results').style = 'display: block; visibility: visible;';
      }
    }

    return false;
  }

  function executeSearch(searchQuery, searchFuseOptions) {
    var request = new XMLHttpRequest();
    request.open('GET', indexurl, true);

    request.onload = function () {
      if (request.status >= 200 && request.status < 400) {
        var jsonprep = request.responseText.replace(/$/, ' ');
        var pages = JSON.parse(jsonprep);
        var fuse = new Fuse(pages, searchFuseOptions);
        var result = fuse.search(searchQuery);

        if (result.length > 0) {
          populateResults(result);
        } else {
          var para = document.createElement('p');
          para.innerHTML = 'No matches found';
          document.getElementById('search-results').appendChild(para);
        }
      } else {
        console.log('fusebar had error ' + request.status + ' on ' + indexurl);
      }
    };

    request.onerror = function () {
      console.log('fusebar search connection error ' + request.status);
    };

    request.send();
  }

  function createMark(value) {
    var markel = document.createElement('mark');
    var spanel = document.createElement('span');
    spanel.setAttribute('class', 'mark');
    spanel.innerHTML = value;
    markel.appendChild(spanel);
    return markel;
  }

  function markMatches(matches) {
    var newResult = {};
    matches.forEach(function (items, num) {
      // eslint-disable-line no-unused-vars
      var newElement = document.createElement('div');
      var prevIndexEnd = 0;
      items.indices.forEach(function (indexpair, indexnum) {
        // eslint-disable-line no-unused-vars
        if (items.key == 'content' && items.value.length > summaryInclude) {
          items.value = items.value.substring(0, summaryInclude);
        }

        var matchString = items.value.substring(indexpair[0], indexpair[1] + 1);

        if (indexpair[0] >= prevIndexEnd) {
          var newSubString = document.createElement('span');
          newSubString.innerHTML = items.value.substring(prevIndexEnd, indexpair[0]);
          newElement.appendChild(newSubString);
        }

        newElement.appendChild(createMark(matchString));
        prevIndexEnd = indexpair[1] + 1;
      });

      if (prevIndexEnd < items.value.length) {
        newElement.appendChild(document.createTextNode(items.value.substring(prevIndexEnd, items.value.length)));
      }

      newResult[items.key] = {
        'element': newElement,
        'original_value': items.value
      };
    });
    return newResult;
  }

  function populateResults(results, searchQuery) {
    // eslint-disable-line no-unused-vars
    results.forEach(function (result, resnum) {
      // eslint-disable-line no-unused-vars
      var resultElement = document.createElement('div');
      resultElement.setAttribute('class', 'search-result');
      resultElement.id = 'search-result-' + resnum.toString();

      if (result.item.content && result.item.content.length > summaryInclude) {
        result.item.content = result.item.content.substring(0, summaryInclude);
      }

      var resultMap = markMatches(result.matches);
      var resultKeys = ['Title', 'Content', 'Tags', 'Categories'];
      resultKeys.forEach(function (key) {
        var lowerKey = key.toString().toLowerCase();
        var keyElement;
        var resultTitleLink;

        if (lowerKey == 'title') {
          keyElement = document.createElement('h4');
          keyElement.setAttribute('class', 'search-result-title');
          resultTitleLink = document.createElement('a');
          resultTitleLink.setAttribute('href', result.item.permalink);
        }

        if (typeof resultMap[lowerKey] !== 'undefined') {
          if (lowerKey == 'title') {
            resultTitleLink.innerHTML = resultMap[lowerKey].element.innerHTML;

            if (!resultMap[lowerKey].element.innerHTML || resultMap[lowerKey].element.innerHTML == '') {
              resultTitleLink.innnerHTML = 'Untitled';
            }
          } else if (lowerKey == 'content') {
            keyElement = resultMap.content.element;
            keyElement.setAttribute('class', 'search-result-content');
          } else {
            var keyElVal;
            keyElement = document.createElement('div');
            keyElement.setAttribute('class', 'search-result-' + lowerKey);
            keyElement.appendChild(document.createTextNode(key + ':  '));
            var firstVal = true;
            result.item[lowerKey].forEach(function (tcval, tckey) {
              // eslint-disable-line no-unused-vars
              if (!firstVal) {
                keyElement.appendChild(document.createTextNode(', '));
              } else {
                firstVal = false;
              }

              if (tcval == resultMap[lowerKey].original_value) {
                keyElVal = document.createElement('span');
                keyElVal.innerHTML = resultMap[lowerKey].element.innerHTML;
              } else {
                keyElVal = document.createElement('span');
                keyElVal.innerHTML = tcval;
              }

              keyElement.appendChild(keyElVal);
            });
          }
        } else {
          if (lowerKey == 'title') {
            resultTitleLink.innerHTML = result.item.title;

            if (!result.item.title || result.item.title == '') {
              resultTitleLink.innerHTML = 'Untitled';
            }
          } else if (lowerKey == 'content') {
            if (result.item.content && result.item.content != '') {
              keyElement = document.createElement('div');
              keyElement.innerHTML = result.item.content;
            }
          } else if (result.item[lowerKey]) {
            keyElement = document.createElement('div');
            keyElement.setAttribute('class', 'search-result-' + lowerKey);
            keyElement.appendChild(document.createTextNode(key + ':  '));
            firstVal = true;
            result.item[lowerKey].forEach(function (tcval, tckey) {
              // eslint-disable-line no-unused-vars
              if (!firstVal) {
                keyElement.appendChild(document.createTextNode(', '));
              } else {
                firstVal = false;
              }

              var keyElVal = document.createElement('span');
              keyElVal.innerHTML = tcval;
              keyElement.appendChild(keyElVal);
            });
          }
        }

        if (lowerKey == 'title') {
          keyElement.appendChild(resultTitleLink);
        }

        if (typeof keyElement !== 'undefined') {
          resultElement.appendChild(keyElement);
        }
      });
      document.getElementById('search-results').appendChild(resultElement);
    });
    return true;
  }

  exports.createMark = createMark;
  exports.doCloseSearch = doCloseSearch;
  exports.doSearch = doSearch;
  exports.executeSearch = executeSearch;
  exports.markMatches = markMatches;
  exports.populateResults = populateResults;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVzZWJhci5kZXYuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgaW5kZXh1cmwgRnVzZSAqL1xuXG52YXIgc3VtbWFyeUluY2x1ZGUgPSAxMDAwXG52YXIgZnVzZU9wdGlvbnMgPSB7IC8vIFNlZSBGdXNlLmpzIGZvciBkZXRhaWxzXG4gIGRpc3RhbmNlOiAxMDAwLFxuICBmaW5kQWxsTWF0Y2hlczogdHJ1ZSxcbiAgc2hvdWxkU29ydDogdHJ1ZSxcbiAgaW5jbHVkZU1hdGNoZXM6IHRydWUsXG4gIG1pbk1hdGNoQ2hhckxlbmd0aDogMSxcbiAgdGhyZXNob2xkOiAwLjUsICAvLyBkZWZhdWx0IG9mIDAuNiBtYXRjaGVzIHRvbyBtdWNoXG4gIHRva2VuaXplOiBmYWxzZSxcbiAga2V5czogW3tcbiAgICBuYW1lOiAndGl0bGUnLFxuICAgIHdlaWdodDogMC4zXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnY29udGVudCcsXG4gICAgd2VpZ2h0OiAwLjRcbiAgfSxcbiAge1xuICAgIG5hbWU6ICd0YWdzJyxcbiAgICB3ZWlnaHQ6IDAuMVxuICB9LFxuICB7XG4gICAgbmFtZTogJ2NhdGVnb3JpZXMnLFxuICAgIHdlaWdodDogMC4xXG4gIH1cbiAgXVxufVxuXG5mdW5jdGlvbiBkb0Nsb3NlU2VhcmNoKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc3VsdHMnKSkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzdWx0cycpLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmU7IHZpc2liaWxpdHk6IGhpZGRlbjsnXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1yZXN1bHRzJykuaW5uZXJIVE1MID0gJzxoMj5TZWFyY2ggUmVzdWx0czwvaDI+J1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvU2VhcmNoKCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIHZhciBzZWFyY2hRdWVyeSA9IGRvY3VtZW50LnNlYXJjaF9mb3JtLnMudmFsdWVcbiAgaWYgKHNlYXJjaFF1ZXJ5KSB7XG4gICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcXVlcnknKSkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1yZXN1bHRzJykuaW5uZXJIVE1MID0gJzxoMj5TZWFyY2ggUmVzdWx0czwvaDI+J1xuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc3VsdHMnKS5zdHlsZSA9ICdkaXNwbGF5OiBibG9jazsgdmlzaWJpbGl0eTogdmlzaWJsZTsnXG4gICAgICB2YXIgc2VhcmNoRnVzZU9wdGlvbnMgPSBmdXNlT3B0aW9uc1xuICAgICAgc2VhcmNoRnVzZU9wdGlvbnMubWluTWF0Y2hDaGFyTGVuZ3RoID0gc2VhcmNoUXVlcnkubGVuZ3RoICogMC44XG4gICAgICBleGVjdXRlU2VhcmNoKHNlYXJjaFF1ZXJ5LCBzZWFyY2hGdXNlT3B0aW9ucylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJylcbiAgICBwYXJhLmlubmVyVGV4dCA9ICdQbGVhc2UgZW50ZXIgYSB3b3JkIG9yIHBocmFzZSBhYm92ZSdcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1yZXN1bHRzJykpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtcmVzdWx0cycpLmFwcGVuZENoaWxkKHBhcmEpXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc3VsdHMnKS5zdHlsZSA9ICdkaXNwbGF5OiBibG9jazsgdmlzaWJpbGl0eTogdmlzaWJsZTsnXG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBleGVjdXRlU2VhcmNoKHNlYXJjaFF1ZXJ5LCBzZWFyY2hGdXNlT3B0aW9ucykge1xuICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG4gIHJlcXVlc3Qub3BlbignR0VUJywgaW5kZXh1cmwsIHRydWUpXG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCA0MDApIHtcbiAgICAgIHZhciBqc29ucHJlcCA9IHJlcXVlc3QucmVzcG9uc2VUZXh0LnJlcGxhY2UoLyQvLCAnICcpXG4gICAgICB2YXIgcGFnZXMgPSBKU09OLnBhcnNlKGpzb25wcmVwKVxuICAgICAgdmFyIGZ1c2UgPSBuZXcgRnVzZShwYWdlcywgc2VhcmNoRnVzZU9wdGlvbnMpXG4gICAgICB2YXIgcmVzdWx0ID0gZnVzZS5zZWFyY2goc2VhcmNoUXVlcnkpXG4gICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgcG9wdWxhdGVSZXN1bHRzKHJlc3VsdCwgc2VhcmNoUXVlcnkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcGFyYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKVxuICAgICAgICBwYXJhLmlubmVySFRNTCA9ICdObyBtYXRjaGVzIGZvdW5kJ1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc3VsdHMnKS5hcHBlbmRDaGlsZChwYXJhKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnZnVzZWJhciBoYWQgZXJyb3IgJyArIHJlcXVlc3Quc3RhdHVzICsgJyBvbiAnICsgaW5kZXh1cmwpXG4gICAgfVxuICB9XG4gIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygnZnVzZWJhciBzZWFyY2ggY29ubmVjdGlvbiBlcnJvciAnICsgcmVxdWVzdC5zdGF0dXMpXG4gIH1cbiAgcmVxdWVzdC5zZW5kKClcbn1cblxuZnVuY3Rpb24gY3JlYXRlTWFyayh2YWx1ZSkge1xuICB2YXIgbWFya2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWFyaycpXG4gIHZhciBzcGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgc3BhbmVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbWFyaycpXG4gIHNwYW5lbC5pbm5lckhUTUwgPSB2YWx1ZVxuICBtYXJrZWwuYXBwZW5kQ2hpbGQoc3BhbmVsKVxuXG4gIHJldHVybiBtYXJrZWxcbn1cblxuZnVuY3Rpb24gbWFya01hdGNoZXMobWF0Y2hlcykge1xuICB2YXIgbmV3UmVzdWx0ID0ge31cbiAgbWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtcywgbnVtKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB2YXIgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cbiAgICB2YXIgcHJldkluZGV4RW5kID0gMFxuXG4gICAgaXRlbXMuaW5kaWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbmRleHBhaXIsIGluZGV4bnVtKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAgIGlmIChpdGVtcy5rZXkgPT0gJ2NvbnRlbnQnICYmIGl0ZW1zLnZhbHVlLmxlbmd0aCA+IHN1bW1hcnlJbmNsdWRlKSB7XG4gICAgICAgIGl0ZW1zLnZhbHVlID0gaXRlbXMudmFsdWUuc3Vic3RyaW5nKDAsIHN1bW1hcnlJbmNsdWRlKVxuICAgICAgfVxuXG4gICAgICB2YXIgbWF0Y2hTdHJpbmcgPSBpdGVtcy52YWx1ZS5zdWJzdHJpbmcoaW5kZXhwYWlyWzBdLCBpbmRleHBhaXJbMV0gKyAxKVxuICAgICAgaWYgKGluZGV4cGFpclswXSA+PSBwcmV2SW5kZXhFbmQpIHtcbiAgICAgICAgdmFyIG5ld1N1YlN0cmluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgICAgICBuZXdTdWJTdHJpbmcuaW5uZXJIVE1MID0gaXRlbXMudmFsdWUuc3Vic3RyaW5nKHByZXZJbmRleEVuZCwgaW5kZXhwYWlyWzBdKVxuICAgICAgICBuZXdFbGVtZW50LmFwcGVuZENoaWxkKG5ld1N1YlN0cmluZylcbiAgICAgIH1cblxuICAgICAgbmV3RWxlbWVudC5hcHBlbmRDaGlsZChjcmVhdGVNYXJrKG1hdGNoU3RyaW5nKSlcblxuICAgICAgcHJldkluZGV4RW5kID0gaW5kZXhwYWlyWzFdICsgMVxuICAgIH0pXG5cbiAgICBpZiAoKHByZXZJbmRleEVuZCkgPCBpdGVtcy52YWx1ZS5sZW5ndGgpIHtcbiAgICAgIG5ld0VsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFxuICAgICAgICAgIGl0ZW1zLnZhbHVlLnN1YnN0cmluZyhwcmV2SW5kZXhFbmQsIGl0ZW1zLnZhbHVlLmxlbmd0aClcbiAgICAgICAgKVxuICAgICAgKVxuICAgIH1cblxuICAgIG5ld1Jlc3VsdFtpdGVtcy5rZXldID0ge1xuICAgICAgJ2VsZW1lbnQnOiBuZXdFbGVtZW50LFxuICAgICAgJ29yaWdpbmFsX3ZhbHVlJzogaXRlbXMudmFsdWVcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIG5ld1Jlc3VsdFxufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZVJlc3VsdHMocmVzdWx0cywgc2VhcmNoUXVlcnkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgcmVzbnVtKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICB2YXIgcmVzdWx0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcmVzdWx0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NlYXJjaC1yZXN1bHQnKVxuICAgIHJlc3VsdEVsZW1lbnQuaWQgPSAnc2VhcmNoLXJlc3VsdC0nICsgcmVzbnVtLnRvU3RyaW5nKClcbiAgICBpZiAocmVzdWx0Lml0ZW0uY29udGVudCAmJiByZXN1bHQuaXRlbS5jb250ZW50Lmxlbmd0aCA+IHN1bW1hcnlJbmNsdWRlKSB7XG4gICAgICByZXN1bHQuaXRlbS5jb250ZW50ID0gcmVzdWx0Lml0ZW0uY29udGVudC5zdWJzdHJpbmcoMCwgc3VtbWFyeUluY2x1ZGUpXG4gICAgfVxuICAgIHZhciByZXN1bHRNYXAgPSBtYXJrTWF0Y2hlcyhyZXN1bHQubWF0Y2hlcylcbiAgICB2YXIgcmVzdWx0S2V5cyA9IFsnVGl0bGUnLCAnQ29udGVudCcsICdUYWdzJywgJ0NhdGVnb3JpZXMnXVxuICAgIHJlc3VsdEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cbiAgICAgIHZhciBsb3dlcktleSA9IGtleS50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICAgIHZhciBrZXlFbGVtZW50XG4gICAgICB2YXIgcmVzdWx0VGl0bGVMaW5rXG5cbiAgICAgIGlmIChsb3dlcktleSA9PSAndGl0bGUnKSB7XG4gICAgICAgIGtleUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoNCcpXG4gICAgICAgIGtleUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWFyY2gtcmVzdWx0LXRpdGxlJylcbiAgICAgICAgcmVzdWx0VGl0bGVMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgICAgIHJlc3VsdFRpdGxlTGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXN1bHQuaXRlbS5wZXJtYWxpbmspXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgcmVzdWx0TWFwW2xvd2VyS2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKGxvd2VyS2V5ID09ICd0aXRsZScpIHtcbiAgICAgICAgICByZXN1bHRUaXRsZUxpbmsuaW5uZXJIVE1MID0gcmVzdWx0TWFwW2xvd2VyS2V5XS5lbGVtZW50LmlubmVySFRNTFxuICAgICAgICAgIGlmICghcmVzdWx0TWFwW2xvd2VyS2V5XS5lbGVtZW50LmlubmVySFRNTCB8fCByZXN1bHRNYXBbbG93ZXJLZXldLmVsZW1lbnQuaW5uZXJIVE1MID09ICcnKSB7XG4gICAgICAgICAgICByZXN1bHRUaXRsZUxpbmsuaW5ubmVySFRNTCA9ICdVbnRpdGxlZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobG93ZXJLZXkgPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAga2V5RWxlbWVudCA9IHJlc3VsdE1hcC5jb250ZW50LmVsZW1lbnRcbiAgICAgICAgICBrZXlFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VhcmNoLXJlc3VsdC1jb250ZW50JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIga2V5RWxWYWxcbiAgICAgICAgICBrZXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICBrZXlFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VhcmNoLXJlc3VsdC0nICsgbG93ZXJLZXkpXG4gICAgICAgICAga2V5RWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShrZXkgKyAnOiAgJykpXG4gICAgICAgICAgdmFyIGZpcnN0VmFsID0gdHJ1ZVxuICAgICAgICAgIHJlc3VsdC5pdGVtW2xvd2VyS2V5XS5mb3JFYWNoKGZ1bmN0aW9uICh0Y3ZhbCwgdGNrZXkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgICAgICAgaWYgKCFmaXJzdFZhbCkge1xuICAgICAgICAgICAgICBrZXlFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcsICcpKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZmlyc3RWYWwgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRjdmFsID09IHJlc3VsdE1hcFtsb3dlcktleV0ub3JpZ2luYWxfdmFsdWUpIHtcbiAgICAgICAgICAgICAga2V5RWxWYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgICAgICAgICAga2V5RWxWYWwuaW5uZXJIVE1MID0gcmVzdWx0TWFwW2xvd2VyS2V5XS5lbGVtZW50LmlubmVySFRNTFxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBrZXlFbFZhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgICAgICAgICAgICBrZXlFbFZhbC5pbm5lckhUTUwgPSB0Y3ZhbFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBrZXlFbGVtZW50LmFwcGVuZENoaWxkKGtleUVsVmFsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsb3dlcktleSA9PSAndGl0bGUnKSB7XG4gICAgICAgICAgcmVzdWx0VGl0bGVMaW5rLmlubmVySFRNTCA9IHJlc3VsdC5pdGVtLnRpdGxlXG4gICAgICAgICAgaWYgKCFyZXN1bHQuaXRlbS50aXRsZSB8fCByZXN1bHQuaXRlbS50aXRsZSA9PSAnJykge1xuICAgICAgICAgICAgcmVzdWx0VGl0bGVMaW5rLmlubmVySFRNTCA9ICdVbnRpdGxlZCdcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobG93ZXJLZXkgPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgaWYgKHJlc3VsdC5pdGVtLmNvbnRlbnQgJiYgKHJlc3VsdC5pdGVtLmNvbnRlbnQgIT0gJycpKSB7XG4gICAgICAgICAgICBrZXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGtleUVsZW1lbnQuaW5uZXJIVE1MID0gcmVzdWx0Lml0ZW0uY29udGVudFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuaXRlbVtsb3dlcktleV0pIHtcbiAgICAgICAgICBrZXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICBrZXlFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VhcmNoLXJlc3VsdC0nICsgbG93ZXJLZXkpXG4gICAgICAgICAga2V5RWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShrZXkgKyAnOiAgJykpXG4gICAgICAgICAgZmlyc3RWYWwgPSB0cnVlXG4gICAgICAgICAgcmVzdWx0Lml0ZW1bbG93ZXJLZXldLmZvckVhY2goZnVuY3Rpb24gKHRjdmFsLCB0Y2tleSkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICAgICAgICBpZiAoIWZpcnN0VmFsKSB7XG4gICAgICAgICAgICAgIGtleUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJywgJykpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmaXJzdFZhbCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5RWxWYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICAgICAgICAgIGtleUVsVmFsLmlubmVySFRNTCA9IHRjdmFsXG4gICAgICAgICAgICBrZXlFbGVtZW50LmFwcGVuZENoaWxkKGtleUVsVmFsKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGxvd2VyS2V5ID09ICd0aXRsZScpIHtcbiAgICAgICAga2V5RWxlbWVudC5hcHBlbmRDaGlsZChyZXN1bHRUaXRsZUxpbmspXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Yga2V5RWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmVzdWx0RWxlbWVudC5hcHBlbmRDaGlsZChrZXlFbGVtZW50KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXJlc3VsdHMnKS5hcHBlbmRDaGlsZChyZXN1bHRFbGVtZW50KVxuICB9KVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmV4cG9ydCB7XG4gIGRvQ2xvc2VTZWFyY2gsXG4gIGRvU2VhcmNoLFxuICBleGVjdXRlU2VhcmNoLFxuICBjcmVhdGVNYXJrLFxuICBtYXJrTWF0Y2hlcyxcbiAgcG9wdWxhdGVSZXN1bHRzXG59XG4iXSwibmFtZXMiOlsic3VtbWFyeUluY2x1ZGUiLCJmdXNlT3B0aW9ucyIsImRpc3RhbmNlIiwiZmluZEFsbE1hdGNoZXMiLCJzaG91bGRTb3J0IiwiaW5jbHVkZU1hdGNoZXMiLCJtaW5NYXRjaENoYXJMZW5ndGgiLCJ0aHJlc2hvbGQiLCJ0b2tlbml6ZSIsImtleXMiLCJuYW1lIiwid2VpZ2h0IiwiZG9DbG9zZVNlYXJjaCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImlubmVySFRNTCIsImRvU2VhcmNoIiwic2VhcmNoUXVlcnkiLCJzZWFyY2hfZm9ybSIsInMiLCJ2YWx1ZSIsInNlYXJjaEZ1c2VPcHRpb25zIiwibGVuZ3RoIiwiZXhlY3V0ZVNlYXJjaCIsInBhcmEiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJUZXh0IiwiYXBwZW5kQ2hpbGQiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwiaW5kZXh1cmwiLCJvbmxvYWQiLCJzdGF0dXMiLCJqc29ucHJlcCIsInJlc3BvbnNlVGV4dCIsInJlcGxhY2UiLCJwYWdlcyIsIkpTT04iLCJwYXJzZSIsImZ1c2UiLCJGdXNlIiwicmVzdWx0Iiwic2VhcmNoIiwicG9wdWxhdGVSZXN1bHRzIiwiY29uc29sZSIsImxvZyIsIm9uZXJyb3IiLCJzZW5kIiwiY3JlYXRlTWFyayIsIm1hcmtlbCIsInNwYW5lbCIsInNldEF0dHJpYnV0ZSIsIm1hcmtNYXRjaGVzIiwibWF0Y2hlcyIsIm5ld1Jlc3VsdCIsImZvckVhY2giLCJpdGVtcyIsIm51bSIsIm5ld0VsZW1lbnQiLCJwcmV2SW5kZXhFbmQiLCJpbmRpY2VzIiwiaW5kZXhwYWlyIiwiaW5kZXhudW0iLCJrZXkiLCJzdWJzdHJpbmciLCJtYXRjaFN0cmluZyIsIm5ld1N1YlN0cmluZyIsImNyZWF0ZVRleHROb2RlIiwicmVzdWx0cyIsInJlc251bSIsInJlc3VsdEVsZW1lbnQiLCJpZCIsInRvU3RyaW5nIiwiaXRlbSIsImNvbnRlbnQiLCJyZXN1bHRNYXAiLCJyZXN1bHRLZXlzIiwibG93ZXJLZXkiLCJ0b0xvd2VyQ2FzZSIsImtleUVsZW1lbnQiLCJyZXN1bHRUaXRsZUxpbmsiLCJwZXJtYWxpbmsiLCJlbGVtZW50IiwiaW5ubmVySFRNTCIsImtleUVsVmFsIiwiZmlyc3RWYWwiLCJ0Y3ZhbCIsInRja2V5Iiwib3JpZ2luYWxfdmFsdWUiLCJ0aXRsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0VBQUE7RUFFQSxJQUFJQSxjQUFjLEdBQUcsSUFBckI7RUFDQSxJQUFJQyxXQUFXLEdBQUc7RUFBRTtFQUNsQkMsRUFBQUEsUUFBUSxFQUFFLElBRE07RUFFaEJDLEVBQUFBLGNBQWMsRUFBRSxJQUZBO0VBR2hCQyxFQUFBQSxVQUFVLEVBQUUsSUFISTtFQUloQkMsRUFBQUEsY0FBYyxFQUFFLElBSkE7RUFLaEJDLEVBQUFBLGtCQUFrQixFQUFFLENBTEo7RUFNaEJDLEVBQUFBLFNBQVMsRUFBRSxHQU5LO0VBTUM7RUFDakJDLEVBQUFBLFFBQVEsRUFBRSxLQVBNO0VBUWhCQyxFQUFBQSxJQUFJLEVBQUUsQ0FBQztFQUNMQyxJQUFBQSxJQUFJLEVBQUUsT0FERDtFQUVMQyxJQUFBQSxNQUFNLEVBQUU7RUFGSCxHQUFELEVBSU47RUFDRUQsSUFBQUEsSUFBSSxFQUFFLFNBRFI7RUFFRUMsSUFBQUEsTUFBTSxFQUFFO0VBRlYsR0FKTSxFQVFOO0VBQ0VELElBQUFBLElBQUksRUFBRSxNQURSO0VBRUVDLElB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
